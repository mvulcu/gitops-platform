apiVersion: v1
data:
  loki-logs-dashboard.json: "{\r\n  \"annotations\": {\r\n    \"list\": []\r\n  },\r\n
    \ \"editable\": true,\r\n  \"fiscalYearStartMonth\": 0,\r\n  \"graphTooltip\":
    0,\r\n  \"id\": null,\r\n  \"links\": [],\r\n  \"panels\": [\r\n    {\r\n      \"datasource\":
    {\r\n        \"type\": \"loki\",\r\n        \"uid\": \"loki\"\r\n      },\r\n
    \     \"fieldConfig\": {\r\n        \"defaults\": {\r\n          \"color\": {\r\n
    \           \"mode\": \"palette-classic\"\r\n          },\r\n          \"custom\":
    {\r\n            \"axisCenteredZero\": false,\r\n            \"axisColorMode\":
    \"text\",\r\n            \"axisLabel\": \"\",\r\n            \"axisPlacement\":
    \"auto\",\r\n            \"barAlignment\": 0,\r\n            \"drawStyle\": \"line\",\r\n
    \           \"fillOpacity\": 10,\r\n            \"gradientMode\": \"none\",\r\n
    \           \"hideFrom\": {\r\n              \"tooltip\": false,\r\n              \"viz\":
    false,\r\n              \"legend\": false\r\n            },\r\n            \"lineInterpolation\":
    \"linear\",\r\n            \"lineWidth\": 1,\r\n            \"pointSize\": 5,\r\n
    \           \"scaleDistribution\": {\r\n              \"type\": \"linear\"\r\n
    \           },\r\n            \"showPoints\": \"never\",\r\n            \"spanNulls\":
    false,\r\n            \"stacking\": {\r\n              \"group\": \"A\",\r\n              \"mode\":
    \"none\"\r\n            },\r\n            \"thresholdsStyle\": {\r\n              \"mode\":
    \"off\"\r\n            }\r\n          },\r\n          \"mappings\": [],\r\n          \"thresholds\":
    {\r\n            \"mode\": \"absolute\",\r\n            \"steps\": [\r\n              {\r\n
    \               \"color\": \"green\",\r\n                \"value\": null\r\n              }\r\n
    \           ]\r\n          },\r\n          \"unit\": \"short\"\r\n        },\r\n
    \       \"overrides\": []\r\n      },\r\n      \"gridPos\": {\r\n        \"h\":
    8,\r\n        \"w\": 12,\r\n        \"x\": 0,\r\n        \"y\": 0\r\n      },\r\n
    \     \"id\": 1,\r\n      \"options\": {\r\n        \"legend\": {\r\n          \"calcs\":
    [],\r\n          \"displayMode\": \"list\",\r\n          \"placement\": \"bottom\",\r\n
    \         \"showLegend\": true\r\n        },\r\n        \"tooltip\": {\r\n          \"mode\":
    \"multi\",\r\n          \"sort\": \"none\"\r\n        }\r\n      },\r\n      \"pluginVersion\":
    \"10.0.0\",\r\n      \"targets\": [\r\n        {\r\n          \"datasource\":
    {\r\n            \"type\": \"loki\",\r\n            \"uid\": \"loki\"\r\n          },\r\n
    \         \"expr\": \"sum(rate({namespace=~\\\"$namespace\\\"}[$__interval]))\",\r\n
    \         \"refId\": \"A\",\r\n          \"legendFormat\": \"Log rate\"\r\n        }\r\n
    \     ],\r\n      \"title\": \"Log Rate (logs/sec)\",\r\n      \"type\": \"timeseries\"\r\n
    \   },\r\n    {\r\n      \"datasource\": {\r\n        \"type\": \"loki\",\r\n
    \       \"uid\": \"loki\"\r\n      },\r\n      \"fieldConfig\": {\r\n        \"defaults\":
    {\r\n          \"color\": {\r\n            \"mode\": \"thresholds\"\r\n          },\r\n
    \         \"mappings\": [],\r\n          \"thresholds\": {\r\n            \"mode\":
    \"absolute\",\r\n            \"steps\": [\r\n              {\r\n                \"color\":
    \"green\",\r\n                \"value\": null\r\n              },\r\n              {\r\n
    \               \"color\": \"yellow\",\r\n                \"value\": 10\r\n              },\r\n
    \             {\r\n                \"color\": \"red\",\r\n                \"value\":
    50\r\n              }\r\n            ]\r\n          },\r\n          \"unit\":
    \"short\"\r\n        },\r\n        \"overrides\": []\r\n      },\r\n      \"gridPos\":
    {\r\n        \"h\": 8,\r\n        \"w\": 12,\r\n        \"x\": 12,\r\n        \"y\":
    0\r\n      },\r\n      \"id\": 2,\r\n      \"options\": {\r\n        \"orientation\":
    \"auto\",\r\n        \"reduceOptions\": {\r\n          \"values\": false,\r\n
    \         \"calcs\": [\r\n            \"lastNotNull\"\r\n          ],\r\n          \"fields\":
    \"\"\r\n        },\r\n        \"showThresholdLabels\": false,\r\n        \"showThresholdMarkers\":
    true\r\n      },\r\n      \"pluginVersion\": \"10.0.0\",\r\n      \"targets\":
    [\r\n        {\r\n          \"datasource\": {\r\n            \"type\": \"loki\",\r\n
    \           \"uid\": \"loki\"\r\n          },\r\n          \"expr\": \"sum(count_over_time({namespace=~\\\"$namespace\\\"}
    |~ \\\"(?i)error|fail|exception\\\"[5m]))\",\r\n          \"refId\": \"A\",\r\n
    \         \"legendFormat\": \"Errors (5m)\"\r\n        }\r\n      ],\r\n      \"title\":
    \"Error Count (Last 5 min)\",\r\n      \"type\": \"gauge\"\r\n    },\r\n    {\r\n
    \     \"datasource\": {\r\n        \"type\": \"loki\",\r\n        \"uid\": \"loki\"\r\n
    \     },\r\n      \"fieldConfig\": {\r\n        \"defaults\": {\r\n          \"color\":
    {\r\n            \"mode\": \"palette-classic\"\r\n          },\r\n          \"custom\":
    {\r\n            \"hideFrom\": {\r\n              \"tooltip\": false,\r\n              \"viz\":
    false,\r\n              \"legend\": false\r\n            }\r\n          },\r\n
    \         \"mappings\": []\r\n        },\r\n        \"overrides\": []\r\n      },\r\n
    \     \"gridPos\": {\r\n        \"h\": 8,\r\n        \"w\": 12,\r\n        \"x\":
    0,\r\n        \"y\": 8\r\n      },\r\n      \"id\": 3,\r\n      \"options\": {\r\n
    \       \"displayLabels\": [\"percent\"],\r\n        \"legend\": {\r\n          \"displayMode\":
    \"table\",\r\n          \"placement\": \"right\",\r\n          \"showLegend\":
    true,\r\n          \"values\": [\"value\"]\r\n        },\r\n        \"pieType\":
    \"pie\",\r\n        \"reduceOptions\": {\r\n          \"values\": false,\r\n          \"calcs\":
    [\r\n            \"lastNotNull\"\r\n          ],\r\n          \"fields\": \"\"\r\n
    \       },\r\n        \"tooltip\": {\r\n          \"mode\": \"single\",\r\n          \"sort\":
    \"none\"\r\n        }\r\n      },\r\n      \"pluginVersion\": \"10.0.0\",\r\n
    \     \"targets\": [\r\n        {\r\n          \"datasource\": {\r\n            \"type\":
    \"loki\",\r\n            \"uid\": \"loki\"\r\n          },\r\n          \"expr\":
    \"sum by (namespace) (count_over_time({namespace=~\\\"$namespace\\\"}[1h]))\",\r\n
    \         \"refId\": \"A\",\r\n          \"legendFormat\": \"{{namespace}}\"\r\n
    \       }\r\n      ],\r\n      \"title\": \"Logs by Namespace (Last Hour)\",\r\n
    \     \"type\": \"piechart\"\r\n    },\r\n    {\r\n      \"datasource\": {\r\n
    \       \"type\": \"loki\",\r\n        \"uid\": \"loki\"\r\n      },\r\n      \"fieldConfig\":
    {\r\n        \"defaults\": {\r\n          \"custom\": {\r\n            \"align\":
    \"auto\",\r\n            \"cellOptions\": {\r\n              \"type\": \"auto\"\r\n
    \           },\r\n            \"inspect\": false\r\n          },\r\n          \"mappings\":
    [],\r\n          \"thresholds\": {\r\n            \"mode\": \"absolute\",\r\n
    \           \"steps\": [\r\n              {\r\n                \"color\": \"green\",\r\n
    \               \"value\": null\r\n              }\r\n            ]\r\n          }\r\n
    \       },\r\n        \"overrides\": []\r\n      },\r\n      \"gridPos\": {\r\n
    \       \"h\": 8,\r\n        \"w\": 12,\r\n        \"x\": 12,\r\n        \"y\":
    8\r\n      },\r\n      \"id\": 4,\r\n      \"options\": {\r\n        \"showHeader\":
    true,\r\n        \"cellHeight\": \"sm\",\r\n        \"footer\": {\r\n          \"show\":
    false,\r\n          \"reducer\": [\"sum\"],\r\n          \"countRows\": false,\r\n
    \         \"fields\": \"\"\r\n        },\r\n        \"frameIndex\": 0\r\n      },\r\n
    \     \"pluginVersion\": \"10.0.0\",\r\n      \"targets\": [\r\n        {\r\n
    \         \"datasource\": {\r\n            \"type\": \"loki\",\r\n            \"uid\":
    \"loki\"\r\n          },\r\n          \"expr\": \"topk(10, sum by (pod) (count_over_time({namespace=~\\\"$namespace\\\"}[1h])))\",\r\n
    \         \"refId\": \"A\",\r\n          \"legendFormat\": \"{{pod}}\"\r\n        }\r\n
    \     ],\r\n      \"title\": \"Top 10 Pods by Log Volume\",\r\n      \"type\":
    \"table\"\r\n    },\r\n    {\r\n      \"datasource\": {\r\n        \"type\": \"loki\",\r\n
    \       \"uid\": \"loki\"\r\n      },\r\n      \"gridPos\": {\r\n        \"h\":
    12,\r\n        \"w\": 24,\r\n        \"x\": 0,\r\n        \"y\": 16\r\n      },\r\n
    \     \"id\": 5,\r\n      \"options\": {\r\n        \"dedupStrategy\": \"none\",\r\n
    \       \"enableLogDetails\": true,\r\n        \"prettifyLogMessage\": false,\r\n
    \       \"showCommonLabels\": false,\r\n        \"showLabels\": false,\r\n        \"showTime\":
    true,\r\n        \"sortOrder\": \"Descending\",\r\n        \"wrapLogMessage\":
    false\r\n      },\r\n      \"pluginVersion\": \"10.0.0\",\r\n      \"targets\":
    [\r\n        {\r\n          \"datasource\": {\r\n            \"type\": \"loki\",\r\n
    \           \"uid\": \"loki\"\r\n          },\r\n          \"expr\": \"{namespace=~\\\"$namespace\\\"}
    |~ \\\"(?i)$search\\\"\",\r\n          \"refId\": \"A\"\r\n        }\r\n      ],\r\n
    \     \"title\": \"Live Logs\",\r\n      \"type\": \"logs\"\r\n    },\r\n    {\r\n
    \     \"datasource\": {\r\n        \"type\": \"loki\",\r\n        \"uid\": \"loki\"\r\n
    \     },\r\n      \"gridPos\": {\r\n        \"h\": 12,\r\n        \"w\": 24,\r\n
    \       \"x\": 0,\r\n        \"y\": 28\r\n      },\r\n      \"id\": 6,\r\n      \"options\":
    {\r\n        \"dedupStrategy\": \"none\",\r\n        \"enableLogDetails\": true,\r\n
    \       \"prettifyLogMessage\": false,\r\n        \"showCommonLabels\": false,\r\n
    \       \"showLabels\": false,\r\n        \"showTime\": true,\r\n        \"sortOrder\":
    \"Descending\",\r\n        \"wrapLogMessage\": false\r\n      },\r\n      \"pluginVersion\":
    \"10.0.0\",\r\n      \"targets\": [\r\n        {\r\n          \"datasource\":
    {\r\n            \"type\": \"loki\",\r\n            \"uid\": \"loki\"\r\n          },\r\n
    \         \"expr\": \"{namespace=~\\\"$namespace\\\"} |~ \\\"(?i)error|fail|exception|fatal|panic\\\"\",\r\n
    \         \"refId\": \"A\"\r\n        }\r\n      ],\r\n      \"title\": \"Error
    Logs\",\r\n      \"type\": \"logs\"\r\n    }\r\n  ],\r\n  \"refresh\": \"10s\",\r\n
    \ \"schemaVersion\": 38,\r\n  \"style\": \"dark\",\r\n  \"tags\": [\"loki\", \"logs\",
    \"kubernetes\"],\r\n  \"templating\": {\r\n    \"list\": [\r\n      {\r\n        \"current\":
    {\r\n          \"selected\": false,\r\n          \"text\": \"All\",\r\n          \"value\":
    \"$__all\"\r\n        },\r\n        \"datasource\": {\r\n          \"type\": \"loki\",\r\n
    \         \"uid\": \"loki\"\r\n        },\r\n        \"definition\": \"\",\r\n
    \       \"hide\": 0,\r\n        \"includeAll\": true,\r\n        \"multi\": true,\r\n
    \       \"name\": \"namespace\",\r\n        \"options\": [],\r\n        \"query\":
    {\r\n          \"label\": \"namespace\",\r\n          \"refId\": \"LokiVariableQueryEditor-VariableQuery\",\r\n
    \         \"stream\": \"\",\r\n          \"type\": 1\r\n        },\r\n        \"refresh\":
    1,\r\n        \"regex\": \"\",\r\n        \"skipUrlSync\": false,\r\n        \"sort\":
    1,\r\n        \"type\": \"query\"\r\n      },\r\n      {\r\n        \"current\":
    {\r\n          \"selected\": false,\r\n          \"text\": \"\",\r\n          \"value\":
    \"\"\r\n        },\r\n        \"hide\": 0,\r\n        \"name\": \"search\",\r\n
    \       \"options\": [\r\n          {\r\n            \"selected\": true,\r\n            \"text\":
    \"\",\r\n            \"value\": \"\"\r\n          }\r\n        ],\r\n        \"query\":
    \"\",\r\n        \"skipUrlSync\": false,\r\n        \"type\": \"textbox\"\r\n
    \     }\r\n    ]\r\n  },\r\n  \"time\": {\r\n    \"from\": \"now-1h\",\r\n    \"to\":
    \"now\"\r\n  },\r\n  \"timepicker\": {},\r\n  \"timezone\": \"\",\r\n  \"title\":
    \"Kubernetes Logs (Loki)\",\r\n  \"uid\": \"kubernetes-logs-loki\",\r\n  \"version\":
    1,\r\n  \"weekStart\": \"\"\r\n}\r\n"
kind: ConfigMap
metadata:
  labels:
    grafana_dashboard: "1"
  name: grafana-dashboard-loki-logs
  namespace: monitoring
